namespace = nhs_vov_civil_war

##Vinlandic War
country_event = {
	id = nhs_vov_civil_war.1
	title = nhs_vov_coloniesevents.40.t
	desc = nhs_vov_coloniesevents.40.d
	picture = norse_war_eventPicture

	trigger = {
		OR = {
			tag = HLL
			tag = MRK
		}
		OR = {
			MRK = {
				OR = {
					owns = 2573
					owns = 980
					owns = 981
					owns = 982
					owns = 994
				}
			}
			HLL = {
				OR = {
					owns = 997
					owns = 996
					owns = 2575
					owns = 2574
					owns = 994
				}
			}
		}
		HLL = { ai = yes }
		MRK = { ai = yes }
		NOT = { has_global_flag = nhs_vov_war_ai_sceniario }
		NOT = { has_global_flag = nhs_vov_war_brewing_c }
		NOT = { has_global_flag = nhs_vov_war_over }
		exists = HLL
		exists = MRK
		is_year = 1473
	}

	immediate = {
			set_country_flag = nhs_vov_war_brewing_c
			set_global_flag = nhs_vov_war_brewing
			set_global_flag = nhs_vov_war_ai_sceniario
			HLL = {
				set_country_flag = nhs_vov_war_brewing_c
				remove_historical_friend = MRK
				add_historical_rival = MRK
				add_truce_with = MRK
			}
			MRK = {
				set_country_flag = nhs_vov_war_brewing_c
				remove_historical_friend = HLL
				add_historical_rival = HLL
				add_truce_with = HLL
			}
	}

	option = {
		name = "nhs_vov_coloniesevents.40.a"
	}
}


#One colony lost all of its starting land
country_event = {
	id = nhs_vov_civil_war.2
	title = nhs_vov_civil_war.2.t
	desc = nhs_vov_coloniesevents.41.d
	picture = norse_dispute_eventPicture

	trigger = {
		OR = {
			tag = HLL
			tag = MRK
		}
		exists = HLL
		exists = MRK
		HLL = { ai = yes }
		MRK = { ai = yes }
		has_global_flag = nhs_vov_war_brewing
		has_global_flag = nhs_vov_war_ai_sceniario
		NOT = { has_global_flag = nhs_vov_war_over }
		had_global_flag = { flag = nhs_vov_war_ai_sceniario days = 30 }
		NOT = { has_global_flag = nhs_vov_war_ai_start }
		nhs_one_of_the_vikings_not_worthy = yes
	}

	immediate = {
		clr_global_flag = nhs_vov_war_brewing
		clr_global_flag = nhs_vov_war_ai_sceniario
		set_global_flag = nhs_vov_war_over
	}

	option = {
		name = "nhs_vov_coloniesevents.41.a"
		trigger = {
			tag = MRK
		}
		inherit = HLL
	}
	option = {
		name = "nhs_vov_coloniesevents.41.a"
		trigger = {
			tag = HLL
		}
		inherit = MRK
	}
}

#One colony is much stronger
country_event = {
	id = nhs_vov_civil_war.3
	title = nhs_vov_civil_war.3.t
	desc = nhs_vov_coloniesevents.41.d
	picture = norse_dispute_eventPicture

	trigger = {
		OR = {
			tag = HLL
			tag = MRK
		}
		exists = HLL
		exists = MRK
		HLL = { ai = yes }
		MRK = { ai = yes }
		has_global_flag = nhs_vov_war_brewing
		has_global_flag = nhs_vov_war_ai_sceniario
		NOT = { has_global_flag = nhs_vov_war_over }
		had_global_flag = { flag = nhs_vov_war_ai_sceniario days = 40 }
		NOT = { has_global_flag = nhs_vov_war_ai_start }
		NOT = { nhs_one_of_the_vikings_not_worthy = yes }
		nhs_one_of_the_vikings_op = yes
	}

	immediate = {
		clr_global_flag = nhs_vov_war_brewing
		clr_global_flag = nhs_vov_war_ai_sceniario
		set_global_flag = nhs_vov_war_over
	}

	option = {
		name = "nhs_vov_coloniesevents.41.a"
		trigger = {
			tag = MRK
		}
		inherit = HLL
	}
	option = {
		name = "nhs_vov_coloniesevents.41.a"
		trigger = {
			tag = HLL
		}
		inherit = MRK
	}
}

#War starts
country_event = {
	id = nhs_vov_civil_war.4
	title = nhs_vov_civil_war.4.t
	desc = nhs_vov_coloniesevents.41.d
	picture = norse_dispute_eventPicture

	trigger = {
		OR = {
			AND = {
				HLL = { is_at_war = no }
				MRK = { is_at_war = no }
			}
			is_year = 1478
		}
		tag = MRK
		MRK = { any_owned_province = { region = canada_region } }
		HLL = { any_owned_province = { region = canada_region } }
		NOT = { has_global_flag = nhs_vov_war_over }
		exists = HLL
		exists = MRK
		HLL = { ai = yes }
		MRK = { ai = yes }
		has_global_flag = nhs_vov_war_brewing
		has_global_flag = nhs_vov_war_ai_sceniario
		had_global_flag = { flag = nhs_vov_war_ai_sceniario days = 95 }
		NOT = { has_global_flag = nhs_vov_war_ai_start }
		NOT = {
			nhs_one_of_the_vikings_not_worthy = yes
		}
		NOT = {
			nhs_one_of_the_vikings_op = yes
		}
	}

	immediate = {
		set_global_flag = nhs_vov_war_ai_start
	}

	option = {
		name = "nhs_vov_coloniesevents.41.a"
		country_event = { id = nhs_vov_civil_war.5 }
	}
}

#Battle
country_event = {
	id = nhs_vov_civil_war.5
	title = nhs_vov_civil_war.5.t
	desc = nhs_vov_coloniesevents.41.d
	picture = norse_dispute_eventPicture

	is_triggered_only = yes

	trigger = {
		exists = HLL
		exists = MRK
		HLL = { ai = yes }
		MRK = { ai = yes }
		tag = MRK
		has_global_flag = nhs_vov_war_brewing
		has_global_flag = nhs_vov_war_ai_sceniario
		has_global_flag = nhs_vov_war_ai_start
	#	#OR = {
	#	#	NOT = { has_global_flag = nhs_cw_first_battle }
	#	#	AND = {
	#	#		MRK = { num_of_cities = 10 }
	#	#		HLL = { num_of_cities = 10 }
	#	#	}
	#	#}
	}

	immediate = {
		clr_global_flag = nhs_cw_battle_land
		clr_global_flag = nhs_cw_battle_landing
		clr_global_flag = nhs_cw_battle_port
		if = {
			limit = {
				NOT = { has_global_flag = nhs_cw_first_battle }
			}
			set_global_flag = nhs_cw_first_battle
		}
		every_province = {
			limit = {
				has_province_flag = nhs_cw_battle_tar2
			}
			clr_province_flag = nhs_cw_battle_tar2
		}
		every_province = {
			limit = {
				has_province_flag = nhs_cw_battle_tar
			}
			clr_province_flag = nhs_cw_battle_tar
		}
		if = {
			limit = {
				OR = {
					MRK = { NOT = { num_of_cities = 2 } }
					HLL = { NOT = { num_of_cities = 2 } }
				}
			}
			country_event = { id = nhs_vov_civil_war.9 days = 25 }
		}
		if = {
			limit = {
				any_owned_province = {
					#controlled_by = MRK
					region = canada_region
					is_capital = no
					any_neighbor_province = {
						region = canada_region
						#controlled_by = HLL
						is_capital = no
						owned_by = HLL
					}
				}
				NOT = {
					OR = {
						MRK = { NOT = { num_of_cities = 2 } }
						HLL = { NOT = { num_of_cities = 2 } }
					}
				}
			}
			set_global_flag = nhs_cw_battle_land
			random_list = {
				50 = {
					random_owned_province = {
						limit = {
							#controlled_by = MRK
							region = canada_region
							is_capital = no
							any_neighbor_province = {
								region = canada_region
								is_capital = no
								#controlled_by = HLL
								owned_by = HLL
							}
						}
						set_province_flag = nhs_cw_battle_tar
						save_global_event_target_as = nhs_cw_battle_tar_et
					}
				}
				50 = {
					random_province = {
						limit = {
							owned_by = HLL
							#controlled_by = HLL
							region = canada_region
							is_capital = no
							any_neighbor_province = {
								region = canada_region
								is_capital = no
								#controlled_by = MRK
								owned_by = MRK
							}
						}
						set_province_flag = nhs_cw_battle_tar
						save_global_event_target_as = nhs_cw_battle_tar_et
					}
				}
			}
		}
		if = {
			limit = {
				NOT = {
					OR = {
						MRK = { NOT = { num_of_cities = 2 } }
						HLL = { NOT = { num_of_cities = 2 } }
					}
				}
				NOT = {
					any_owned_province = {
						#controlled_by = MRK
						region = canada_region
						is_capital = no
						any_neighbor_province = {
							#controlled_by = HLL
							region = canada_region
							is_capital = no
							owned_by = HLL
						}
					}
				}
				any_owned_province = {
					#controlled_by = MRK
					region = canada_region
					is_capital = no
					sea_zone = {
						nhs_vinland_waters = yes
						any_neighbor_province = {
							region = canada_region
							#controlled_by = HLL
							is_capital = no
							owned_by = HLL
						}
					}
				}
			}
			set_global_flag = nhs_cw_battle_landing
			random_list = {
				50 = {
					random_owned_province = {
						limit = {
							#controlled_by = MRK
							region = canada_region
							is_capital = no
							sea_zone = {
								nhs_vinland_waters = yes
								any_neighbor_province = {
									region = canada_region
									is_capital = no
									#controlled_by = HLL
									owned_by = HLL
								}
							}
						}
						set_province_flag = nhs_cw_battle_tar
						save_global_event_target_as = nhs_cw_battle_tar_et
						owner = { save_global_event_target_as = nhs_cw_battle_tar_agressor }
					}
					random_province = {
						limit = {
							#controlled_by = HLL
							owned_by = HLL
							region = canada_region
							is_capital = no
							sea_zone = {
								nhs_vinland_waters = yes
								any_neighbor_province = {
									region = canada_region
									is_capital = no
									has_province_flag = nhs_cw_battle_tar
								}
							}
						}
						set_province_flag = nhs_cw_battle_tar2
						save_global_event_target_as = nhs_cw_battle_tar_et2
						owner = { save_global_event_target_as = nhs_cw_battle_tar_defender }
					}
				}
				50 = {
					random_owned_province = {
						limit = {
							#controlled_by = MRK
							region = canada_region
							is_capital = no
							sea_zone = {
								nhs_vinland_waters = yes
								any_neighbor_province = {
									#controlled_by = HLL
									region = canada_region
									is_capital = no
									owned_by = HLL
								}
							}
						}
						set_province_flag = nhs_cw_battle_tar
						save_global_event_target_as = nhs_cw_battle_tar_et2
						owner = { save_global_event_target_as = nhs_cw_battle_tar_defender }
					}
					random_province = {
						limit = {
							#controlled_by = HLL
							owned_by = HLL
							is_capital = no
							region = canada_region
							sea_zone = {
								nhs_vinland_waters = yes
								any_neighbor_province = {
									region = canada_region
									is_capital = no
									has_province_flag = nhs_cw_battle_tar
								}
							}
						}
						set_province_flag = nhs_cw_battle_tar2
						save_global_event_target_as = nhs_cw_battle_tar_et
						owner = { save_global_event_target_as = nhs_cw_battle_tar_agressor }
					}
				}
			}
		}
		#####
		if = {
			limit = {
				NOT = {
					OR = {
						MRK = { NOT = { num_of_cities = 2 } }
						HLL = { NOT = { num_of_cities = 2 } }
					}
				}
				NOT = {
					any_owned_province = {
						#controlled_by = MRK
						region = canada_region
						is_capital = no
						any_neighbor_province = {
							#controlled_by = HLL
							region = canada_region
							is_capital = no
							owned_by = HLL
						}
					}
				}
				NOT = {
					any_owned_province = {
						#controlled_by = MRK
						is_capital = no
						region = canada_region
						sea_zone = {
							nhs_vinland_waters = yes
							any_neighbor_province = {
								is_capital = no
								#controlled_by = HLL
								owned_by = HLL
								region = canada_region
							}
						}
					}
				}
				any_owned_province = {
					#controlled_by = MRK
					region = canada_region
					is_capital = no
					has_port = yes
				}
				any_province = {
					#controlled_by = HLL
					region = canada_region
					is_capital = no
					owned_by = HLL
					has_port = yes
				}
			}
			set_global_flag = nhs_cw_battle_port
			random_list = {
				50 = {
					HLL = { save_global_event_target_as = nhs_cw_battle_tar_agressor }
					MRK = { save_global_event_target_as = nhs_cw_battle_tar_defender }
					random_owned_province = {
						limit = {
							#controlled_by = MRK
							region = canada_region
							is_capital = no
							has_port = yes
						}
						set_province_flag = nhs_cw_battle_tar
						save_global_event_target_as = nhs_cw_battle_tar_et2
					}
					random_province = {
						limit = {
							#controlled_by = HLL
							owned_by = HLL
							is_capital = no
							region = canada_region
							has_port = yes
						}
						set_province_flag = nhs_cw_battle_tar2
						save_global_event_target_as = nhs_cw_battle_tar_et
					}
				}
				50 = {
					MRK = { save_global_event_target_as = nhs_cw_battle_tar_agressor }
					HLL = { save_global_event_target_as = nhs_cw_battle_tar_defender }
					random_owned_province = {
						limit = {
							#controlled_by = MRK
							region = canada_region
							is_capital = no
							has_port = yes
						}
						set_province_flag = nhs_cw_battle_tar
						save_global_event_target_as = nhs_cw_battle_tar_et
					}
					random_province = {
						limit = {
							#controlled_by = HLL
							owned_by = HLL
							is_capital = no
							region = canada_region
							has_port = yes
						}
						set_province_flag = nhs_cw_battle_tar2
						save_global_event_target_as = nhs_cw_battle_tar_et2
					}
				}
			}
		}
		clr_global_flag = nhs_cw_battle_cooldown
		set_global_flag = nhs_cw_battle_cooldown
	}

	option = {
		name = "nhs_vov_coloniesevents.41.a"
		if = {
			limit = {
				has_global_flag = nhs_cw_battle_land
			}
			country_event = { id = nhs_vov_civil_war.6 }
		}
		if = {
			limit = {
				has_global_flag = nhs_cw_battle_landing
			}
			country_event = { id = nhs_vov_civil_war.7 }
		}
		if = {
			limit = {
				has_global_flag = nhs_cw_battle_port
			}
			country_event = { id = nhs_vov_civil_war.8 }
		}
	}
}

#Battle debug
country_event = {
	id = nhs_vov_civil_war.51
	title = nhs_vov_civil_war.5.t
	desc = nhs_vov_coloniesevents.41.d
	picture = norse_dispute_eventPicture

	trigger = {
		exists = HLL
		exists = MRK
		HLL = { ai = yes }
		MRK = { ai = yes }
		tag = MRK
		has_global_flag = nhs_vov_war_brewing
		has_global_flag = nhs_vov_war_ai_sceniario
		has_global_flag = nhs_vov_war_ai_start
		had_global_flag = { flag = nhs_cw_battle_cooldown days = 140 }
		NOT = { has_global_flag = nhs_vov_war_over }
	#	#OR = {
	#	#	NOT = { has_global_flag = nhs_cw_first_battle }
	#	#	AND = {
	#	#		MRK = { num_of_cities = 10 }
	#	#		HLL = { num_of_cities = 10 }
	#	#	}
	#	#}
	}

	immediate = {
		clr_global_flag = nhs_cw_battle_land
		clr_global_flag = nhs_cw_battle_landing
		clr_global_flag = nhs_cw_battle_port
		if = {
			limit = {
				NOT = { has_global_flag = nhs_cw_first_battle }
			}
			set_global_flag = nhs_cw_first_battle
		}
		every_province = {
			limit = {
				has_province_flag = nhs_cw_battle_tar2
			}
			clr_province_flag = nhs_cw_battle_tar2
		}
		every_province = {
			limit = {
				has_province_flag = nhs_cw_battle_tar
			}
			clr_province_flag = nhs_cw_battle_tar
		}
		if = {
			limit = {
				OR = {
					MRK = { NOT = { num_of_cities = 2 } }
					HLL = { NOT = { num_of_cities = 2 } }
				}
			}
			country_event = { id = nhs_vov_civil_war.9 days = 25 }
		}
		if = {
			limit = {
				any_owned_province = {
					#controlled_by = MRK
					region = canada_region
					is_capital = no
					any_neighbor_province = {
						region = canada_region
						#controlled_by = HLL
						is_capital = no
						owned_by = HLL
					}
				}
				NOT = {
					OR = {
						MRK = { NOT = { num_of_cities = 2 } }
						HLL = { NOT = { num_of_cities = 2 } }
					}
				}
			}
			set_global_flag = nhs_cw_battle_land
			random_list = {
				50 = {
					random_owned_province = {
						limit = {
							#controlled_by = MRK
							region = canada_region
							is_capital = no
							any_neighbor_province = {
								region = canada_region
								is_capital = no
								#controlled_by = HLL
								owned_by = HLL
							}
						}
						set_province_flag = nhs_cw_battle_tar
						save_global_event_target_as = nhs_cw_battle_tar_et
					}
				}
				50 = {
					random_province = {
						limit = {
							owned_by = HLL
							#controlled_by = HLL
							region = canada_region
							is_capital = no
							any_neighbor_province = {
								region = canada_region
								is_capital = no
								#controlled_by = MRK
								owned_by = MRK
							}
						}
						set_province_flag = nhs_cw_battle_tar
						save_global_event_target_as = nhs_cw_battle_tar_et
					}
				}
			}
		}
		if = {
			limit = {
				NOT = {
					OR = {
						MRK = { NOT = { num_of_cities = 2 } }
						HLL = { NOT = { num_of_cities = 2 } }
					}
				}
				NOT = {
					any_owned_province = {
						#controlled_by = MRK
						region = canada_region
						is_capital = no
						any_neighbor_province = {
							#controlled_by = HLL
							region = canada_region
							is_capital = no
							owned_by = HLL
						}
					}
				}
				any_owned_province = {
					#controlled_by = MRK
					region = canada_region
					is_capital = no
					sea_zone = {
						nhs_vinland_waters = yes
						any_neighbor_province = {
							region = canada_region
							#controlled_by = HLL
							is_capital = no
							owned_by = HLL
						}
					}
				}
			}
			set_global_flag = nhs_cw_battle_landing
			random_list = {
				50 = {
					random_owned_province = {
						limit = {
							#controlled_by = MRK
							region = canada_region
							is_capital = no
							sea_zone = {
								nhs_vinland_waters = yes
								any_neighbor_province = {
									region = canada_region
									is_capital = no
									#controlled_by = HLL
									owned_by = HLL
								}
							}
						}
						set_province_flag = nhs_cw_battle_tar
						save_global_event_target_as = nhs_cw_battle_tar_et
						owner = { save_global_event_target_as = nhs_cw_battle_tar_agressor }
					}
					random_province = {
						limit = {
							#controlled_by = HLL
							owned_by = HLL
							region = canada_region
							is_capital = no
							sea_zone = {
								nhs_vinland_waters = yes
								any_neighbor_province = {
									region = canada_region
									is_capital = no
									has_province_flag = nhs_cw_battle_tar
								}
							}
						}
						set_province_flag = nhs_cw_battle_tar2
						save_global_event_target_as = nhs_cw_battle_tar_et2
						owner = { save_global_event_target_as = nhs_cw_battle_tar_defender }
					}
				}
				50 = {
					random_owned_province = {
						limit = {
							#controlled_by = MRK
							region = canada_region
							is_capital = no
							sea_zone = {
								nhs_vinland_waters = yes
								any_neighbor_province = {
									#controlled_by = HLL
									region = canada_region
									is_capital = no
									owned_by = HLL
								}
							}
						}
						set_province_flag = nhs_cw_battle_tar
						save_global_event_target_as = nhs_cw_battle_tar_et2
						owner = { save_global_event_target_as = nhs_cw_battle_tar_defender }
					}
					random_province = {
						limit = {
							#controlled_by = HLL
							owned_by = HLL
							is_capital = no
							region = canada_region
							sea_zone = {
								nhs_vinland_waters = yes
								any_neighbor_province = {
									region = canada_region
									is_capital = no
									has_province_flag = nhs_cw_battle_tar
								}
							}
						}
						set_province_flag = nhs_cw_battle_tar2
						save_global_event_target_as = nhs_cw_battle_tar_et
						owner = { save_global_event_target_as = nhs_cw_battle_tar_agressor }
					}
				}
			}
		}
		#####
		if = {
			limit = {
				NOT = {
					OR = {
						MRK = { NOT = { num_of_cities = 2 } }
						HLL = { NOT = { num_of_cities = 2 } }
					}
				}
				NOT = {
					any_owned_province = {
						#controlled_by = MRK
						region = canada_region
						is_capital = no
						any_neighbor_province = {
							#controlled_by = HLL
							region = canada_region
							is_capital = no
							owned_by = HLL
						}
					}
				}
				NOT = {
					any_owned_province = {
						#controlled_by = MRK
						is_capital = no
						region = canada_region
						sea_zone = {
							nhs_vinland_waters = yes
							any_neighbor_province = {
								is_capital = no
								#controlled_by = HLL
								owned_by = HLL
								region = canada_region
							}
						}
					}
				}
				any_owned_province = {
					#controlled_by = MRK
					region = canada_region
					is_capital = no
					has_port = yes
				}
				any_province = {
					#controlled_by = HLL
					region = canada_region
					is_capital = no
					owned_by = HLL
					has_port = yes
				}
			}
			set_global_flag = nhs_cw_battle_port
			random_list = {
				50 = {
					HLL = { save_global_event_target_as = nhs_cw_battle_tar_agressor }
					MRK = { save_global_event_target_as = nhs_cw_battle_tar_defender }
					random_owned_province = {
						limit = {
							#controlled_by = MRK
							region = canada_region
							is_capital = no
							has_port = yes
						}
						set_province_flag = nhs_cw_battle_tar
						save_global_event_target_as = nhs_cw_battle_tar_et2
					}
					random_province = {
						limit = {
							#controlled_by = HLL
							owned_by = HLL
							is_capital = no
							region = canada_region
							has_port = yes
						}
						set_province_flag = nhs_cw_battle_tar2
						save_global_event_target_as = nhs_cw_battle_tar_et
					}
				}
				50 = {
					MRK = { save_global_event_target_as = nhs_cw_battle_tar_agressor }
					HLL = { save_global_event_target_as = nhs_cw_battle_tar_defender }
					random_owned_province = {
						limit = {
							#controlled_by = MRK
							region = canada_region
							is_capital = no
							has_port = yes
						}
						set_province_flag = nhs_cw_battle_tar
						save_global_event_target_as = nhs_cw_battle_tar_et
					}
					random_province = {
						limit = {
							#controlled_by = HLL
							owned_by = HLL
							is_capital = no
							region = canada_region
							has_port = yes
						}
						set_province_flag = nhs_cw_battle_tar2
						save_global_event_target_as = nhs_cw_battle_tar_et2
					}
				}
			}
		}
		clr_global_flag = nhs_cw_battle_cooldown
		set_global_flag = nhs_cw_battle_cooldown
	}

	option = {
		name = "nhs_vov_coloniesevents.41.a"
		if = {
			limit = {
				has_global_flag = nhs_cw_battle_land
			}
			country_event = { id = nhs_vov_civil_war.6 }
		}
		if = {
			limit = {
				has_global_flag = nhs_cw_battle_landing
			}
			country_event = { id = nhs_vov_civil_war.7 }
		}
		if = {
			limit = {
				has_global_flag = nhs_cw_battle_port
			}
			country_event = { id = nhs_vov_civil_war.8 }
		}
	}
}

#Land Battle
country_event = {
	id = nhs_vov_civil_war.6
	title = nhs_vov_civil_war.6.t
	desc = nhs_vov_civil_war.6.d
	picture = norse_war_eventPicture

	is_triggered_only = yes
	trigger = {
		exists = MRK
		exists = HLL
		NOT = {
			OR = {
				MRK = { NOT = { num_of_cities = 2 } }
				HLL = { NOT = { num_of_cities = 2 } }
			}
		}
	}

	immediate = {
		if = {
			limit = {
				trading_with_markland = yes
			}
			random_list = {
				75 = {
					MRK = { save_global_event_target_as = nhs_cw_battle_winner }
					MRK = { set_country_flag = nhs_won_last_battle }
					HLL = { clr_country_flag = nhs_won_last_battle }
					random_province = {
						limit = {
							has_province_flag = nhs_cw_battle_tar
						}
						if = {
							limit = {
								NOT = { owned_by = MRK }
							}
							cede_province = MRK
							add_core = MRK
						}
						every_neighbor_province = {
							limit = {
								is_capital = no
								NOT = { owned_by = MRK }
							}
							cede_province = MRK
							add_core = MRK
						}
					}
				}
				25 = {
					HLL = { save_global_event_target_as = nhs_cw_battle_winner }
					HLL = { set_country_flag = nhs_won_last_battle }
					MRK = { clr_country_flag = nhs_won_last_battle }
					random_province = {
						limit = {
							has_province_flag = nhs_cw_battle_tar
						}
						if = {
							limit = {
								NOT = { owned_by = HLL }
							}
							cede_province = HLL
							add_core = HLL
						}
						every_neighbor_province = {
							limit = {
								is_capital = no
								NOT = { owned_by = HLL }
							}
							cede_province = HLL
							add_core = HLL
						}
					}
				}
			}
		}
		if = {
			limit = {
				trading_with_helluland = yes
			}
			random_list = {
				25 = {
					MRK = { save_global_event_target_as = nhs_cw_battle_winner }
					MRK = { set_country_flag = nhs_won_last_battle }
					HLL = { clr_country_flag = nhs_won_last_battle }
					random_province = {
						limit = {
							has_province_flag = nhs_cw_battle_tar
						}
						if = {
							limit = {
								NOT = { owned_by = MRK }
							}
							cede_province = MRK
							add_core = MRK
						}
						every_neighbor_province = {
							limit = {
								is_capital = no
								NOT = { owned_by = MRK }
							}
							cede_province = MRK
							add_core = MRK
						}
					}
				}
				75 = {
					HLL = { save_global_event_target_as = nhs_cw_battle_winner }
					HLL = { set_country_flag = nhs_won_last_battle }
					MRK = { clr_country_flag = nhs_won_last_battle }
					random_province = {
						limit = {
							has_province_flag = nhs_cw_battle_tar
						}
						if = {
							limit = {
								NOT = { owned_by = HLL }
							}
							cede_province = HLL
							add_core = HLL
						}
						every_neighbor_province = {
							limit = {
								is_capital = no
								NOT = { owned_by = HLL }
							}
							cede_province = HLL
							add_core = HLL
						}
					}
				}
			}
		}
		if = {
			limit = {
				NOT = { trading_with_markland = yes }
				NOT = { trading_with_helluland = yes }
			}
			if = {
				limit = {
					HLL = { has_country_flag = nhs_won_last_battle }
					NOT = { MRK = { has_country_flag = nhs_won_last_battle } }
				}
				random_list = {
					65 = {
						HLL = { save_global_event_target_as = nhs_cw_battle_winner }
						HLL = { set_country_flag = nhs_won_last_battle }
						MRK = { clr_country_flag = nhs_won_last_battle }
						random_province = {
							limit = {
								has_province_flag = nhs_cw_battle_tar
							}
							if = {
								limit = {
									NOT = { owned_by = HLL }
								}
								cede_province = HLL
								add_core = HLL
							}
							every_neighbor_province = {
								limit = {
									is_capital = no
									NOT = { owned_by = HLL }
								}
								cede_province = HLL
								add_core = HLL
							}
						}
					}
					35 = {
						MRK = { save_global_event_target_as = nhs_cw_battle_winner }
						MRK = { set_country_flag = nhs_won_last_battle }
						HLL = { clr_country_flag = nhs_won_last_battle }
						random_province = {
							limit = {
								has_province_flag = nhs_cw_battle_tar
							}
							if = {
								limit = {
									NOT = { owned_by = MRK }
								}
								cede_province = MRK
								add_core = MRK
							}
							every_neighbor_province = {
								limit = {
									is_capital = no
									NOT = { owned_by = MRK }
								}
								cede_province = MRK
								add_core = MRK
							}
						}
					}
				}
			}
			####
			if = {
				limit = {
					MRK = { has_country_flag = nhs_won_last_battle }
					NOT = { HLL = { has_country_flag = nhs_won_last_battle } }
				}
				random_list = {
					35 = {
						HLL = { save_global_event_target_as = nhs_cw_battle_winner }
						HLL = { set_country_flag = nhs_won_last_battle }
						MRK = { clr_country_flag = nhs_won_last_battle }
						random_province = {
							limit = {
								has_province_flag = nhs_cw_battle_tar
							}
							if = {
								limit = {
									NOT = { owned_by = HLL }
								}
								cede_province = HLL
								add_core = HLL
							}
							every_neighbor_province = {
								limit = {
									is_capital = no
									NOT = { owned_by = HLL }
								}
								cede_province = HLL
								add_core = HLL
							}
						}
					}
					65 = {
						MRK = { save_global_event_target_as = nhs_cw_battle_winner }
						MRK = { set_country_flag = nhs_won_last_battle }
						HLL = { clr_country_flag = nhs_won_last_battle }
						random_province = {
							limit = {
								has_province_flag = nhs_cw_battle_tar
							}
							if = {
								limit = {
									NOT = { owned_by = MRK }
								}
								cede_province = MRK
								add_core = MRK
							}
							every_neighbor_province = {
								limit = {
									is_capital = no
									NOT = { owned_by = MRK }
								}
								cede_province = MRK
								add_core = MRK
							}
						}
					}
				}
			}
			###
			if = {
				limit = {
					OR = {
						AND = {
							NOT = { HLL = { has_country_flag = nhs_won_last_battle } }
							NOT = { MRK = { has_country_flag = nhs_won_last_battle } }
						}
						AND = { #Incase something wierd happens
							HLL = { has_country_flag = nhs_won_last_battle }
							MRK = { has_country_flag = nhs_won_last_battle }
						}
					}
				}
				random_list = {
					50 = {
						HLL = { save_global_event_target_as = nhs_cw_battle_winner }
						HLL = { set_country_flag = nhs_won_last_battle }
						MRK = { clr_country_flag = nhs_won_last_battle }
						random_province = {
							limit = {
								has_province_flag = nhs_cw_battle_tar
							}
							if = {
								limit = {
									NOT = { owned_by = HLL }
								}
								cede_province = HLL
								add_core = HLL
							}
							every_neighbor_province = {
								limit = {
									is_capital = no
									NOT = { owned_by = HLL }
								}
								cede_province = HLL
								add_core = HLL
							}
						}
					}
					50 = {
						MRK = { save_global_event_target_as = nhs_cw_battle_winner }
						MRK = { set_country_flag = nhs_won_last_battle }
						HLL = { clr_country_flag = nhs_won_last_battle }
						random_province = {
							limit = {
								has_province_flag = nhs_cw_battle_tar
							}
							if = {
								limit = {
									NOT = { owned_by = MRK }
								}
								cede_province = MRK
								add_core = MRK
							}
							every_neighbor_province = {
								limit = {
									is_capital = no
									NOT = { owned_by = MRK }
								}
								cede_province = MRK
								add_core = MRK
							}
						}
					}
				}
			}
		}
		nhs_roll_the_next_battle = yes
	}
	option = {
		name = "nhs_vov_coloniesevents.40.a"
		every_country = {
			limit = {
				any_known_country = {
					OR = {
						tag = MRK
						tag = HLL
					}
				}
				ai = no
			}
			country_event = { id = nhs_vov_civil_war.100 }
		}
	}
}

#Landing Battle
country_event = {
	id = nhs_vov_civil_war.7
	title = nhs_vov_civil_war.7.t
	desc = nhs_vov_coloniesevents.40.d
	picture = norse_war_eventPicture

	is_triggered_only = yes
	trigger = {
		exists = MRK
		exists = HLL
		NOT = {
			OR = {
				MRK = { NOT = { num_of_cities = 2 } }
				HLL = { NOT = { num_of_cities = 2 } }
			}
		}
	}

	immediate = {
		if = {
			limit = {
				trading_with_markland = yes
			}
			random_list = {
				75 = {
					MRK = { save_global_event_target_as = nhs_cw_battle_winner }
					MRK = { set_country_flag = nhs_won_last_battle }
					HLL = { clr_country_flag = nhs_won_last_battle }
					random_province = {
						limit = {
							has_province_flag = nhs_cw_battle_tar2
						}
						if = {
							limit = {
								NOT = { owned_by = MRK }
							}
							cede_province = MRK
							add_core = MRK
						}
						every_neighbor_province = {
							limit = {
								is_capital = no
								NOT = { owned_by = MRK }
							}
							cede_province = MRK
							add_core = MRK
						}
					}
				}
				25 = {
					HLL = { save_global_event_target_as = nhs_cw_battle_winner }
					HLL = { set_country_flag = nhs_won_last_battle }
					MRK = { clr_country_flag = nhs_won_last_battle }
					random_province = {
						limit = {
							has_province_flag = nhs_cw_battle_tar
						}
						if = {
							limit = {
								NOT = { owned_by = HLL }
							}
							cede_province = HLL
							add_core = HLL
						}
						every_neighbor_province = {
							limit = {
								is_capital = no
								NOT = { owned_by = HLL }
							}
							cede_province = HLL
							add_core = HLL
						}
					}
				}
			}
		}
		if = {
			limit = {
				trading_with_helluland = yes
			}
			random_list = {
				25 = {
					MRK = { save_global_event_target_as = nhs_cw_battle_winner }
					MRK = { set_country_flag = nhs_won_last_battle }
					HLL = { clr_country_flag = nhs_won_last_battle }
					random_province = {
						limit = {
							has_province_flag = nhs_cw_battle_tar2
						}
						if = {
							limit = {
								NOT = { owned_by = MRK }
							}
							cede_province = MRK
							add_core = MRK
						}
						every_neighbor_province = {
							limit = {
								is_capital = no
								NOT = { owned_by = MRK }
							}
							cede_province = MRK
							add_core = MRK
						}
					}
				}
				75 = {
					HLL = { save_global_event_target_as = nhs_cw_battle_winner }
					HLL = { set_country_flag = nhs_won_last_battle }
					MRK = { clr_country_flag = nhs_won_last_battle }
					random_province = {
						limit = {
							has_province_flag = nhs_cw_battle_tar
						}
						if = {
							limit = {
								NOT = { owned_by = HLL }
							}
							cede_province = HLL
							add_core = HLL
						}
						every_neighbor_province = {
							limit = {
								is_capital = no
								NOT = { owned_by = HLL }
							}
							cede_province = HLL
							add_core = HLL
						}
					}
				}
			}
		}
		if = {
			limit = {
				NOT = { trading_with_markland = yes }
				NOT = { trading_with_helluland = yes }
			}
			if = {
				limit = {
					HLL = { has_country_flag = nhs_won_last_battle }
					NOT = { MRK = { has_country_flag = nhs_won_last_battle } }
				}
				random_list = {
					65 = {
						HLL = { save_global_event_target_as = nhs_cw_battle_winner }
						HLL = { set_country_flag = nhs_won_last_battle }
						MRK = { clr_country_flag = nhs_won_last_battle }
						random_province = {
							limit = {
								has_province_flag = nhs_cw_battle_tar
							}
							if = {
								limit = {
									NOT = { owned_by = HLL }
								}
								cede_province = HLL
								add_core = HLL
							}
							every_neighbor_province = {
								limit = {
									is_capital = no
									NOT = { owned_by = HLL }
								}
								cede_province = HLL
								add_core = HLL
							}
						}
					}
					35 = {
						MRK = { save_global_event_target_as = nhs_cw_battle_winner }
						MRK = { set_country_flag = nhs_won_last_battle }
						HLL = { clr_country_flag = nhs_won_last_battle }
						random_province = {
							limit = {
								has_province_flag = nhs_cw_battle_tar2
							}
							if = {
								limit = {
									NOT = { owned_by = MRK }
								}
								cede_province = MRK
								add_core = MRK
							}
							every_neighbor_province = {
								limit = {
									is_capital = no
									NOT = { owned_by = MRK }
								}
								cede_province = MRK
								add_core = MRK
							}
						}
					}
				}
			}
			###
			if = {
				limit = {
					MRK = { has_country_flag = nhs_won_last_battle }
					NOT = { HLL = { has_country_flag = nhs_won_last_battle } }
				}
				random_list = {
					35 = {
						HLL = { save_global_event_target_as = nhs_cw_battle_winner }
						HLL = { set_country_flag = nhs_won_last_battle }
						MRK = { clr_country_flag = nhs_won_last_battle }
						random_province = {
							limit = {
								has_province_flag = nhs_cw_battle_tar
							}
							if = {
								limit = {
									NOT = { owned_by = HLL }
								}
								cede_province = HLL
								add_core = HLL
							}
							every_neighbor_province = {
								limit = {
									is_capital = no
									NOT = { owned_by = HLL }
								}
								cede_province = HLL
								add_core = HLL
							}
						}
					}
					65 = {
						MRK = { save_global_event_target_as = nhs_cw_battle_winner }
						MRK = { set_country_flag = nhs_won_last_battle }
						HLL = { clr_country_flag = nhs_won_last_battle }
						random_province = {
							limit = {
								has_province_flag = nhs_cw_battle_tar2
							}
							if = {
								limit = {
									NOT = { owned_by = MRK }
								}
								cede_province = MRK
								add_core = MRK
							}
							every_neighbor_province = {
								limit = {
									is_capital = no
									NOT = { owned_by = MRK }
								}
								cede_province = MRK
								add_core = MRK
							}
						}
					}
				}
			}
			###
			if = {
				limit = {
					OR = {
						AND = {
							NOT = { HLL = { has_country_flag = nhs_won_last_battle } }
							NOT = { MRK = { has_country_flag = nhs_won_last_battle } }
						}
						AND = { #Incase something wierd happens
							HLL = { has_country_flag = nhs_won_last_battle }
							MRK = { has_country_flag = nhs_won_last_battle }
						}
					}
				}
				random_list = {
					50 = {
						HLL = { save_global_event_target_as = nhs_cw_battle_winner }
						HLL = { set_country_flag = nhs_won_last_battle }
						MRK = { clr_country_flag = nhs_won_last_battle }
						random_province = {
							limit = {
								has_province_flag = nhs_cw_battle_tar
							}
							if = {
								limit = {
									NOT = { owned_by = HLL }
								}
								cede_province = HLL
								add_core = HLL
							}
							every_neighbor_province = {
								limit = {
									is_capital = no
									NOT = { owned_by = HLL }
								}
								cede_province = HLL
								add_core = HLL
							}
						}
					}
					50 = {
						MRK = { save_global_event_target_as = nhs_cw_battle_winner }
						MRK = { set_country_flag = nhs_won_last_battle }
						HLL = { clr_country_flag = nhs_won_last_battle }
						random_province = {
							limit = {
								has_province_flag = nhs_cw_battle_tar2
							}
							if = {
								limit = {
									NOT = { owned_by = MRK }
								}
								cede_province = MRK
								add_core = MRK
							}
							every_neighbor_province = {
								limit = {
									is_capital = no
									NOT = { owned_by = MRK }
								}
								cede_province = MRK
								add_core = MRK
							}
						}
					}
				}
			}
		}
		nhs_roll_the_next_battle = yes
	}
	option = {
		name = "nhs_vov_coloniesevents.40.a"
		every_country = {
			limit = {
				any_known_country = {
					OR = {
						tag = MRK
						tag = HLL
					}
				}
				ai = no
			}
			country_event = { id = nhs_vov_civil_war.101 }
		}
	}
}

#Port Battle
country_event = {
	id = nhs_vov_civil_war.8
	title = nhs_vov_civil_war.8.t
	desc = nhs_vov_coloniesevents.40.d
	picture = norse_war_eventPicture

	is_triggered_only = yes
	trigger = {
		exists = MRK
		NOT = {
			OR = {
				MRK = { NOT = { num_of_cities = 2 } }
				HLL = { NOT = { num_of_cities = 2 } }
			}
		}
		exists = HLL
	}

	immediate = {
		if = {
			limit = {
				trading_with_markland = yes
			}
			random_list = {
				75 = {
					MRK = { save_global_event_target_as = nhs_cw_battle_winner }
					MRK = { set_country_flag = nhs_won_last_battle }
					HLL = { clr_country_flag = nhs_won_last_battle }
					random_province = {
						limit = {
							has_province_flag = nhs_cw_battle_tar2
						}
						if = {
							limit = {
								NOT = { owned_by = MRK }
							}
							cede_province = MRK
							add_core = MRK
						}
						every_neighbor_province = {
							limit = {
								is_capital = no
								NOT = { owned_by = MRK }
							}
							cede_province = MRK
							add_core = MRK
						}
					}
				}
				25 = {
					HLL = { save_global_event_target_as = nhs_cw_battle_winner }
					HLL = { set_country_flag = nhs_won_last_battle }
					MRK = { clr_country_flag = nhs_won_last_battle }
					random_province = {
						limit = {
							has_province_flag = nhs_cw_battle_tar
						}
						if = {
							limit = {
								NOT = { owned_by = HLL }
							}
							cede_province = HLL
							add_core = HLL
						}
						every_neighbor_province = {
							limit = {
								is_capital = no
								NOT = { owned_by = HLL }
							}
							cede_province = HLL
							add_core = HLL
						}
					}
				}
			}
		}
		if = {
			limit = {
				trading_with_helluland = yes
			}
			random_list = {
				25 = {
					MRK = { save_global_event_target_as = nhs_cw_battle_winner }
					MRK = { set_country_flag = nhs_won_last_battle }
					HLL = { clr_country_flag = nhs_won_last_battle }
					random_province = {
						limit = {
							has_province_flag = nhs_cw_battle_tar2
						}
						if = {
							limit = {
								NOT = { owned_by = MRK }
							}
							cede_province = MRK
							add_core = MRK
						}
						every_neighbor_province = {
							limit = {
								is_capital = no
								NOT = { owned_by = MRK }
							}
							cede_province = MRK
							add_core = MRK
						}
					}
				}
				75 = {
					HLL = { save_global_event_target_as = nhs_cw_battle_winner }
					HLL = { set_country_flag = nhs_won_last_battle }
					MRK = { clr_country_flag = nhs_won_last_battle }
					random_province = {
						limit = {
							has_province_flag = nhs_cw_battle_tar
						}
						if = {
							limit = {
								NOT = { owned_by = HLL }
							}
							cede_province = HLL
							add_core = HLL
						}
						every_neighbor_province = {
							limit = {
								is_capital = no
								NOT = { owned_by = HLL }
							}
							cede_province = HLL
							add_core = HLL
						}
					}
				}
			}
		}
		if = {
			limit = {
				NOT = { trading_with_markland = yes }
				NOT = { trading_with_helluland = yes }
			}
			if = {
				limit = {
					HLL = { has_country_flag = nhs_won_last_battle }
					NOT = { MRK = { has_country_flag = nhs_won_last_battle } }
				}
				random_list = {
					65 = {
						HLL = { save_global_event_target_as = nhs_cw_battle_winner }
						HLL = { set_country_flag = nhs_won_last_battle }
						MRK = { clr_country_flag = nhs_won_last_battle }
						random_province = {
							limit = {
								has_province_flag = nhs_cw_battle_tar
							}
							if = {
								limit = {
									NOT = { owned_by = HLL }
								}
								cede_province = HLL
								add_core = HLL
							}
							every_neighbor_province = {
								limit = {
									is_capital = no
									NOT = { owned_by = HLL }
								}
								cede_province = HLL
								add_core = HLL
							}
						}
					}
					35 = {
						MRK = { save_global_event_target_as = nhs_cw_battle_winner }
						MRK = { set_country_flag = nhs_won_last_battle }
						HLL = { clr_country_flag = nhs_won_last_battle }
						random_province = {
							limit = {
								has_province_flag = nhs_cw_battle_tar2
							}
							if = {
								limit = {
									NOT = { owned_by = MRK }
								}
								cede_province = MRK
								add_core = MRK
							}
							every_neighbor_province = {
								limit = {
									is_capital = no
									NOT = { owned_by = MRK }
								}
								cede_province = MRK
								add_core = MRK
							}
						}
					}
				}
			}
			###
			if = {
				limit = {
					MRK = { has_country_flag = nhs_won_last_battle }
					NOT = { HLL = { has_country_flag = nhs_won_last_battle } }
				}
				random_list = {
					35 = {
						HLL = { save_global_event_target_as = nhs_cw_battle_winner }
						HLL = { set_country_flag = nhs_won_last_battle }
						MRK = { clr_country_flag = nhs_won_last_battle }
						random_province = {
							limit = {
								has_province_flag = nhs_cw_battle_tar
							}
							if = {
								limit = {
									NOT = { owned_by = HLL }
								}
								cede_province = HLL
								add_core = HLL
							}
							every_neighbor_province = {
								limit = {
									is_capital = no
									NOT = { owned_by = HLL }
								}
								cede_province = HLL
								add_core = HLL
							}
						}
					}
					65 = {
						MRK = { save_global_event_target_as = nhs_cw_battle_winner }
						MRK = { set_country_flag = nhs_won_last_battle }
						HLL = { clr_country_flag = nhs_won_last_battle }
						random_province = {
							limit = {
								has_province_flag = nhs_cw_battle_tar2
							}
							if = {
								limit = {
									NOT = { owned_by = MRK }
								}
								cede_province = MRK
								add_core = MRK
							}
							every_neighbor_province = {
								limit = {
									is_capital = no
									NOT = { owned_by = MRK }
								}
								cede_province = MRK
								add_core = MRK
							}
						}
					}
				}
			}
			###
			if = {
				limit = {
					OR = {
						AND = {
							NOT = { HLL = { has_country_flag = nhs_won_last_battle } }
							NOT = { MRK = { has_country_flag = nhs_won_last_battle } }
						}
						AND = { #Incase something wierd happens
							HLL = { has_country_flag = nhs_won_last_battle }
							MRK = { has_country_flag = nhs_won_last_battle }
						}
					}
				}
				random_list = {
					50 = {
						HLL = { save_global_event_target_as = nhs_cw_battle_winner }
						HLL = { set_country_flag = nhs_won_last_battle }
						MRK = { clr_country_flag = nhs_won_last_battle }
						random_province = {
							limit = {
								has_province_flag = nhs_cw_battle_tar
							}
							if = {
								limit = {
									NOT = { owned_by = HLL }
								}
								cede_province = HLL
								add_core = HLL
							}
							every_neighbor_province = {
								limit = {
									is_capital = no
									NOT = { owned_by = HLL }
								}
								cede_province = HLL
								add_core = HLL
							}
						}
					}
					50 = {
						MRK = { save_global_event_target_as = nhs_cw_battle_winner }
						MRK = { set_country_flag = nhs_won_last_battle }
						HLL = { clr_country_flag = nhs_won_last_battle }
						random_province = {
							limit = {
								has_province_flag = nhs_cw_battle_tar2
							}
							if = {
								limit = {
									NOT = { owned_by = MRK }
								}
								cede_province = MRK
								add_core = MRK
							}
							every_neighbor_province = {
								limit = {
									is_capital = no
									NOT = { owned_by = MRK }
								}
								cede_province = MRK
								add_core = MRK
							}
						}
					}
				}
			}
		}

		nhs_roll_the_next_battle = yes
	}
	option = {
		name = "nhs_vov_coloniesevents.40.a"
		every_country = {
			limit = {
				any_known_country = {
					OR = {
						tag = MRK
						tag = HLL
					}
				}
				ai = no
			}
			country_event = { id = nhs_vov_civil_war.102 }
		}
	}
}

#Capital Siege
country_event = {
	id = nhs_vov_civil_war.9
	title = nhs_vov_civil_war.9.t
	desc = nhs_vov_coloniesevents.40.d
	picture = norse_war_eventPicture

	is_triggered_only = yes
	trigger = {
		exists = MRK
		exists = HLL
	}

#	trigger = {
#		exists = HLL
#		exists = MRK
#		HLL = { ai = yes }
#		MRK = { ai = yes }
#		tag = MRK
#		has_global_flag = nhs_vov_war_brewing
#		has_global_flag = nhs_vov_war_ai_sceniario
#		has_global_flag = nhs_vov_war_ai_start
#		OR = {
#			AND = {
#				any_province = {
#					owned_by = HLL
#					any_neighbor_province = {
#						owned_by = MRK
#						is_capital = yes
#					}
#				}
#				MRK = { NOT = { num_of_cities = 10 } }
#				NOT = { trading_with_markland = yes }
#			}
#			AND = {
#				any_province = {
#					owned_by = MRK
#					any_neighbor_province = {
#						owned_by = HLL
#						is_capital = yes
#					}
#				}
#				HLL = { NOT = { num_of_cities = 10 } }
#				NOT = { trading_with_helluland = yes }
#			}
#		}
#	}

	immediate = {
		if = {
			limit = {
				OR = {
					any_province = {
						owned_by = HLL
						any_neighbor_province = {
							owned_by = MRK
							is_capital = yes
						}
					}
					MRK = { NOT = { num_of_cities = 2 } }
				}
				MRK = { NOT = { num_of_cities = 10 } }
				NOT = { trading_with_markland = yes }
				NOT = {
					AND = {
						OR = {
							any_province = {
								owned_by = MRK
								any_neighbor_province = {
									owned_by = HLL
									is_capital = yes
								}
							}
							HLL = { NOT = { num_of_cities = 2 } }
						}
						HLL = { NOT = { num_of_cities = 10 } }
						NOT = { trading_with_helluland = yes }
					}
				}
			}
			MRK = { capital_scope = { save_global_event_target_as = nhs_cw_battle_tar_et } }
			HLL = { save_global_event_target_as = nhs_cw_battle_winner }
			HLL = { set_country_flag = nhs_won_last_battle }
			MRK = { clr_country_flag = nhs_won_last_battle }
			every_country = {
				limit = {
					any_known_country = {
						OR = {
							tag = MRK
							tag = HLL
						}
					}
					ai = no
				}
				country_event = { id = nhs_vov_civil_war.104 }
			}
			HLL = { inherit = MRK }
			set_global_flag = nhs_vov_war_over
		}
		if = {
			limit = {
				OR = {
					any_province = {
						owned_by = MRK
						any_neighbor_province = {
							owned_by = HLL
							is_capital = yes
						}
					}
					HLL = { NOT = { num_of_cities = 2 } }
				}
				HLL = { NOT = { num_of_cities = 10 } }
				NOT = { trading_with_helluland = yes }
				NOT = {
					AND = {
						OR = {
							any_province = {
								owned_by = HLL
								any_neighbor_province = {
									owned_by = MRK
									is_capital = yes
								}
							}
							MRK = { NOT = { num_of_cities = 2 } }
						}
						MRK = { NOT = { num_of_cities = 10 } }
						NOT = { trading_with_markland = yes }
					}
				}
			}
			HLL = { capital_scope = { save_global_event_target_as = nhs_cw_battle_tar_et } }
			MRK = { save_global_event_target_as = nhs_cw_battle_winner }
			MRK = { set_country_flag = nhs_won_last_battle }
			HLL = { clr_country_flag = nhs_won_last_battle }
			every_country = {
				limit = {
					any_known_country = {
						OR = {
							tag = MRK
							tag = HLL
						}
					}
					ai = no
				}
				country_event = { id = nhs_vov_civil_war.104 }
			}
			MRK = { inherit = HLL }
			set_global_flag = nhs_vov_war_over
		}
		if = {
			limit = {
				OR = {
					any_province = {
						owned_by = MRK
						any_neighbor_province = {
							owned_by = HLL
							is_capital = yes
						}
					}
					HLL = { NOT = { num_of_cities = 2 } }
				}
				OR = {
					any_province = {
						owned_by = HLL
						any_neighbor_province = {
							owned_by = MRK
							is_capital = yes
						}
					}
					MRK = { NOT = { num_of_cities = 2 } }
				}
				HLL = { NOT = { num_of_cities = 10 } }
				MRK = { NOT = { num_of_cities = 10 } }
				NOT = { trading_with_markland = yes }
				NOT = { trading_with_helluland = yes }
			}
			if = {
				limit = {
					MRK = { has_global_flag = nhs_won_last_battle }
				}
				MRK = { save_global_event_target_as = nhs_cw_battle_winner }
				HLL = { capital_scope = { save_global_event_target_as = nhs_cw_battle_tar_et } }
				every_country = {
					limit = {
						any_known_country = {
							OR = {
								tag = MRK
								tag = HLL
							}
						}
						ai = no
					}
					country_event = { id = nhs_vov_civil_war.104 }
				}
				MRK = { inherit = HLL }
				set_global_flag = nhs_vov_war_over
			}
			if = {
				limit = {
					HLL = { has_global_flag = nhs_won_last_battle }
				}
				HLL = { save_global_event_target_as = nhs_cw_battle_winner }
				MRK = { capital_scope = { save_global_event_target_as = nhs_cw_battle_tar_et } }
				every_country = {
					limit = {
						any_known_country = {
							OR = {
								tag = MRK
								tag = HLL
							}
						}
						ai = no
					}
					country_event = { id = nhs_vov_civil_war.104 }
				}
				HLL = { inherit = MRK }
				set_global_flag = nhs_vov_war_over
			}
		}
	}
	option = {
		name = "nhs_vov_coloniesevents.40.a"
	}
}

#Capital Siege debug
country_event = {
	id = nhs_vov_civil_war.91
	title = nhs_vov_civil_war.9.t
	desc = nhs_vov_coloniesevents.40.d
	picture = norse_war_eventPicture

	trigger = {
		exists = MRK
		exists = HLL
		MRK = { ai = yes }
		HLL = { ai = yes }
		tag = MRK
		has_global_flag = nhs_vov_war_brewing
		has_global_flag = nhs_vov_war_ai_sceniario
		has_global_flag = nhs_vov_war_ai_start
		OR = {
			MRK = { NOT = { num_of_cities = 2 } }
			HLL = { NOT = { num_of_cities = 2 } }
		}
		had_global_flag = { flag = nhs_cw_battle_cooldown days = 80 }
		NOT = { has_global_flag = nhs_vov_war_over }
	}

	immediate = {
		if = {
			limit = {
				OR = {
					any_province = {
						owned_by = HLL
						any_neighbor_province = {
							owned_by = MRK
							is_capital = yes
						}
					}
					MRK = { NOT = { num_of_cities = 2 } }
				}
				MRK = { NOT = { num_of_cities = 10 } }
				NOT = { trading_with_markland = yes }
				NOT = {
					AND = {
						OR = {
							any_province = {
								owned_by = MRK
								any_neighbor_province = {
									owned_by = HLL
									is_capital = yes
								}
							}
							HLL = { NOT = { num_of_cities = 2 } }
						}
						HLL = { NOT = { num_of_cities = 10 } }
						NOT = { trading_with_helluland = yes }
					}
				}
			}
			MRK = { capital_scope = { save_global_event_target_as = nhs_cw_battle_tar_et } }
			HLL = { save_global_event_target_as = nhs_cw_battle_winner }
			HLL = { set_country_flag = nhs_won_last_battle }
			MRK = { clr_country_flag = nhs_won_last_battle }
			every_country = {
				limit = {
					any_known_country = {
						OR = {
							tag = MRK
							tag = HLL
						}
					}
					ai = no
				}
				country_event = { id = nhs_vov_civil_war.104 }
			}
			HLL = { inherit = MRK }
			set_global_flag = nhs_vov_war_over
		}
		if = {
			limit = {
				OR = {
					any_province = {
						owned_by = MRK
						any_neighbor_province = {
							owned_by = HLL
							is_capital = yes
						}
					}
					HLL = { NOT = { num_of_cities = 2 } }
				}
				HLL = { NOT = { num_of_cities = 10 } }
				NOT = { trading_with_helluland = yes }
				NOT = {
					AND = {
						OR = {
							any_province = {
								owned_by = HLL
								any_neighbor_province = {
									owned_by = MRK
									is_capital = yes
								}
							}
							MRK = { NOT = { num_of_cities = 2 } }
						}
						MRK = { NOT = { num_of_cities = 10 } }
						NOT = { trading_with_markland = yes }
					}
				}
			}
			HLL = { capital_scope = { save_global_event_target_as = nhs_cw_battle_tar_et } }
			MRK = { save_global_event_target_as = nhs_cw_battle_winner }
			MRK = { set_country_flag = nhs_won_last_battle }
			HLL = { clr_country_flag = nhs_won_last_battle }
			every_country = {
				limit = {
					any_known_country = {
						OR = {
							tag = MRK
							tag = HLL
						}
					}
					ai = no
				}
				country_event = { id = nhs_vov_civil_war.104 }
			}
			MRK = { inherit = HLL }
			set_global_flag = nhs_vov_war_over
		}
		if = {
			limit = {
				OR = {
					any_province = {
						owned_by = MRK
						any_neighbor_province = {
							owned_by = HLL
							is_capital = yes
						}
					}
					HLL = { NOT = { num_of_cities = 2 } }
				}
				OR = {
					any_province = {
						owned_by = HLL
						any_neighbor_province = {
							owned_by = MRK
							is_capital = yes
						}
					}
					MRK = { NOT = { num_of_cities = 2 } }
				}
				HLL = { NOT = { num_of_cities = 10 } }
				MRK = { NOT = { num_of_cities = 10 } }
				NOT = { trading_with_markland = yes }
				NOT = { trading_with_helluland = yes }
			}
			if = {
				limit = {
					MRK = { has_global_flag = nhs_won_last_battle }
				}
				MRK = { save_global_event_target_as = nhs_cw_battle_winner }
				HLL = { capital_scope = { save_global_event_target_as = nhs_cw_battle_tar_et } }
				every_country = {
					limit = {
						any_known_country = {
							OR = {
								tag = MRK
								tag = HLL
							}
						}
						ai = no
					}
					country_event = { id = nhs_vov_civil_war.104 }
				}
				MRK = { inherit = HLL }
				set_global_flag = nhs_vov_war_over
			}
			if = {
				limit = {
					HLL = { has_global_flag = nhs_won_last_battle }
				}
				HLL = { save_global_event_target_as = nhs_cw_battle_winner }
				MRK = { capital_scope = { save_global_event_target_as = nhs_cw_battle_tar_et } }
				every_country = {
					limit = {
						any_known_country = {
							OR = {
								tag = MRK
								tag = HLL
							}
						}
						ai = no
					}
					country_event = { id = nhs_vov_civil_war.104 }
				}
				HLL = { inherit = MRK }
				set_global_flag = nhs_vov_war_over
			}
		}
	}
	option = {
		name = "nhs_vov_coloniesevents.40.a"
	}
}

#Naval Battle
country_event = {
	id = nhs_vov_civil_war.10
	title = nhs_vov_civil_war.10.t
	desc = nhs_vov_coloniesevents.41.d
	picture = norse_dispute_eventPicture

	is_triggered_only = yes
	trigger = {
		exists = MRK
		exists = HLL
	}

	#trigger = {
	#	any_province = {
	#		OR = {
	#			owned_by = MRK
	#			owned_by = HLL
	#		}
	#		NOT = { region = canada_region }
	#	}
	#	exists = HLL
	#	exists = MRK
	#	HLL = { ai = yes }
	#	MRK = { ai = yes }
	#	tag = MRK
	#	has_global_flag = nhs_vov_war_brewing
	#	has_global_flag = nhs_vov_war_ai_sceniario
	#	has_global_flag = nhs_vov_war_ai_start
	#	had_global_flag = { flag = nhs_cw_battle_cooldown days = 35 }
	#}

	immediate = {
		if = {
			limit = {
				trading_with_markland = yes
			}
			MRK = { save_global_event_target_as = nhs_cw_battle_winner }
			MRK = { set_country_flag = nhs_won_last_battle }
			HLL = { clr_country_flag = nhs_won_last_battle }
			random_province = {
				limit = {
					is_sea = yes
					any_neighbor_province = {
						OR = {
							owned_by = MRK
							owned_by = HLL
						}
					}
				}
				save_global_event_target_as = nhs_cw_battle_tar_et
			}
			every_province = {
				limit = {
					is_capital = no
					owned_by = HLL
					NOT = { region = canada_region }
				}
				cede_province = MRK
				add_core = MRK
			}
		}
		if = {
			limit = {
				trading_with_helluland = yes
			}
			HLL = { save_global_event_target_as = nhs_cw_battle_winner }
			HLL = { set_country_flag = nhs_won_last_battle }
			MRK = { clr_country_flag = nhs_won_last_battle }
			random_province = {
				limit = {
					is_sea = yes
					any_neighbor_province = {
						OR = {
							owned_by = MRK
							owned_by = HLL
						}
					}
				}
				save_global_event_target_as = nhs_cw_battle_tar_et
			}
			every_province = {
				limit = {
					is_capital = no
					owned_by = MRK
					NOT = { region = canada_region }
				}
				cede_province = HLL
				add_core = HLL
			}
		}
		if = {
			limit = {
				NOT = { trading_with_markland = yes }
				NOT = { trading_with_helluland = yes }
			}
			random_list = {
				50 = {
					HLL = { save_global_event_target_as = nhs_cw_battle_winner }
					HLL = { set_country_flag = nhs_won_last_battle }
					MRK = { clr_country_flag = nhs_won_last_battle }
					random_province = {
						limit = {
							is_sea = yes
							any_neighbor_province = {
								OR = {
									owned_by = MRK
									owned_by = HLL
								}
							}
						}
						save_global_event_target_as = nhs_cw_battle_tar_et
					}
					every_province = {
						limit = {
							is_capital = no
							owned_by = MRK
							NOT = { region = canada_region }
						}
						cede_province = HLL
						add_core = HLL
					}
				}
				50 = {
					MRK = { save_global_event_target_as = nhs_cw_battle_winner }
					MRK = { set_country_flag = nhs_won_last_battle }
					HLL = { clr_country_flag = nhs_won_last_battle }
					random_province = {
						limit = {
							is_sea = yes
							any_neighbor_province = {
								OR = {
									owned_by = MRK
									owned_by = HLL
								}
							}
						}
						save_global_event_target_as = nhs_cw_battle_tar_et
					}
					every_province = {
						limit = {
							is_capital = no
							owned_by = HLL
							NOT = { region = canada_region }
						}
						cede_province = MRK
						add_core = MRK
					}
				}
			}
		}
		clr_global_flag = nhs_cw_battle_cooldown
		set_global_flag = nhs_cw_battle_cooldown
		nhs_roll_the_next_battle = yes
	}

	option = {
		name = "nhs_vov_coloniesevents.41.a"
		every_country = {
			limit = {
				any_known_country = {
					OR = {
						tag = MRK
						tag = HLL
					}
				}
				ai = no
			}
			country_event = { id = nhs_vov_civil_war.103 }
		}
	}
}

#Naval Battle debug
country_event = {
	id = nhs_vov_civil_war.1011
	title = nhs_vov_civil_war.10.t
	desc = nhs_vov_coloniesevents.41.d
	picture = norse_dispute_eventPicture

	trigger = {
		any_province = {
			OR = {
				owned_by = MRK
				owned_by = HLL
			}
			NOT = { region = canada_region }
		}
		NOT = { has_global_flag = nhs_vov_war_over }
		exists = HLL
		exists = MRK
		HLL = { ai = yes }
		MRK = { ai = yes }
		tag = MRK
		has_global_flag = nhs_vov_war_brewing
		has_global_flag = nhs_vov_war_ai_sceniario
		has_global_flag = nhs_vov_war_ai_start
		had_global_flag = { flag = nhs_cw_battle_cooldown days = 110 }
	}

	immediate = {
		if = {
			limit = {
				trading_with_markland = yes
			}
			MRK = { save_global_event_target_as = nhs_cw_battle_winner }
			MRK = { set_country_flag = nhs_won_last_battle }
			HLL = { clr_country_flag = nhs_won_last_battle }
			random_province = {
				limit = {
					is_sea = yes
					any_neighbor_province = {
						OR = {
							owned_by = MRK
							owned_by = HLL
						}
					}
				}
				save_global_event_target_as = nhs_cw_battle_tar_et
			}
			every_province = {
				limit = {
					is_capital = no
					owned_by = HLL
					NOT = { region = canada_region }
				}
				cede_province = MRK
				add_core = MRK
			}
		}
		if = {
			limit = {
				trading_with_helluland = yes
			}
			HLL = { save_global_event_target_as = nhs_cw_battle_winner }
			HLL = { set_country_flag = nhs_won_last_battle }
			MRK = { clr_country_flag = nhs_won_last_battle }
			random_province = {
				limit = {
					is_sea = yes
					any_neighbor_province = {
						OR = {
							owned_by = MRK
							owned_by = HLL
						}
					}
				}
				save_global_event_target_as = nhs_cw_battle_tar_et
			}
			every_province = {
				limit = {
					is_capital = no
					owned_by = MRK
					NOT = { region = canada_region }
				}
				cede_province = HLL
				add_core = HLL
			}
		}
		if = {
			limit = {
				NOT = { trading_with_markland = yes }
				NOT = { trading_with_helluland = yes }
			}
			random_list = {
				50 = {
					HLL = { save_global_event_target_as = nhs_cw_battle_winner }
					HLL = { set_country_flag = nhs_won_last_battle }
					MRK = { clr_country_flag = nhs_won_last_battle }
					random_province = {
						limit = {
							is_sea = yes
							any_neighbor_province = {
								OR = {
									owned_by = MRK
									owned_by = HLL
								}
							}
						}
						save_global_event_target_as = nhs_cw_battle_tar_et
					}
					every_province = {
						limit = {
							is_capital = no
							owned_by = MRK
							NOT = { region = canada_region }
						}
						cede_province = HLL
						add_core = HLL
					}
				}
				50 = {
					MRK = { save_global_event_target_as = nhs_cw_battle_winner }
					MRK = { set_country_flag = nhs_won_last_battle }
					HLL = { clr_country_flag = nhs_won_last_battle }
					random_province = {
						limit = {
							is_sea = yes
							any_neighbor_province = {
								OR = {
									owned_by = MRK
									owned_by = HLL
								}
							}
						}
						save_global_event_target_as = nhs_cw_battle_tar_et
					}
					every_province = {
						limit = {
							is_capital = no
							owned_by = HLL
							NOT = { region = canada_region }
						}
						cede_province = MRK
						add_core = MRK
					}
				}
			}
		}
		clr_global_flag = nhs_cw_battle_cooldown
		set_global_flag = nhs_cw_battle_cooldown
		nhs_roll_the_next_battle = yes
	}

	option = {
		name = "nhs_vov_coloniesevents.41.a"
		every_country = {
			limit = {
				any_known_country = {
					OR = {
						tag = MRK
						tag = HLL
					}
				}
				ai = no
			}
			country_event = { id = nhs_vov_civil_war.103 }
		}
	}
}

#Land Battle Report
country_event = {
	id = nhs_vov_civil_war.100
	title = nhs_vov_civil_war.100.t
	desc = nhs_vov_civil_war.100.d
	picture = norse_dispute_eventPicture

	is_triggered_only = yes

	trigger = {
		ai = no
	}

	immediate = {
	}

	option = {
		name = "nhs_vov_civil_war.100.a"
	}
}

#Landing Battle Report
country_event = {
	id = nhs_vov_civil_war.101
	title = nhs_vov_civil_war.101.t
	desc = nhs_vov_civil_war.101.d
	picture = norse_dispute_eventPicture

	is_triggered_only = yes

	trigger = {
		ai = no
	}

	immediate = {
		if = {
			limit = {
				event_target:nhs_cw_battle_tar_defender = {
					has_country_flag = nhs_won_last_battle
				}
			}
			custom_tooltip = nhs_vov_tooltip_defender_victor
		}
		if = {
			limit = {
				event_target:nhs_cw_battle_tar_agressor = {
					has_country_flag = nhs_won_last_battle
				}
			}
			custom_tooltip = nhs_vov_tooltip_attacker_victor
		}
	}

	option = {
		name = "nhs_vov_civil_war.101.a"
	}
}

#Port Battle Report
country_event = {
	id = nhs_vov_civil_war.102
	title = nhs_vov_civil_war.101.t
	desc = nhs_vov_civil_war.101.d
	picture = norse_dispute_eventPicture

	is_triggered_only = yes

	trigger = {
		ai = no
	}

	immediate = {
		if = {
			limit = {
				event_target:nhs_cw_battle_tar_defender = {
					has_country_flag = nhs_won_last_battle
				}
			}
			custom_tooltip = nhs_vov_tooltip_defender_victor
		}
		if = {
			limit = {
				event_target:nhs_cw_battle_tar_agressor = {
					has_country_flag = nhs_won_last_battle
				}
			}
			custom_tooltip = nhs_vov_tooltip_attacker_victor
		}
	}

	option = {
		name = "nhs_vov_civil_war.101.a"
	}
}

#Naval Battle Report
country_event = {
	id = nhs_vov_civil_war.103
	title = nhs_vov_civil_war.103.t
	desc = nhs_vov_civil_war.103.d
	picture = norse_dispute_eventPicture

	is_triggered_only = yes

	trigger = {
		ai = no
	}

	immediate = {
	}

	option = {
		name = "nhs_vov_civil_war.103.a"
	}
}

#City Siege Report
country_event = {
	id = nhs_vov_civil_war.104
	title = nhs_vov_civil_war.104.t
	desc = nhs_vov_civil_war.104.d
	picture = norse_dispute_eventPicture

	is_triggered_only = yes

	trigger = {
		ai = no
	}

	immediate = {
	}

	option = {
		name = "nhs_vov_civil_war.104.a"
	}
}
